<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: public/javascripts/Models/Criterion.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: public/javascripts/Models/Criterion.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module Models
 * @memberof! Models
 * @file Technology.js - This file is part of the Models module, it describes the Criterion class
 * @author dhmmasson
 */

import { EventFirer } from "../EventFirer.mjs" ;
import { definePrivateProperties } from "../utils.mjs" ;


/**
 * @extends EventFirer
 * @property {string} name - Unique name of the criteria, to use to reference the criteria
 * @property {string} description - Full name to be used to be displayed
 * @property {Score}  min - Minimum value for the criteria in the database
 * @property {Score}  max - Maximum value for the criteria in the database
 * @property {number} weight - weight of the criteria for the score computation
 * @property {number} blurIntensity - [0-1] how much to extend the range [ evaluation - blurIntensity * ( max - min ), evaluation ]
 * @memberof! Models
 * @alias module:Models.Criterion
 */
class Criterion extends EventFirer {

  /**
   * constructor - create a new criterion from a serialization of it (either from json or from the db)
   *
   * @param  {Object} serialization
   * @param  {string} serialization.name            - name of the criteria
   * @param  {string} [serialization.description=serialization.name]   - description of the criteria, name if absent
   * @param  {number} [serialization.min=0]           - min value for the criteria, 0 if absent
   * @param  {number} [serialization.max=5]           - max value for the criteria, 5 if absent

   */
  constructor ( { name, description, min, max } ) {
    super( Criterion.eventType ) ;
    this.name = name ;
    this.description = description || name ;
    this.min = +min || 0 ;
    this.max = +max || 5 ;
    definePrivateProperties( this, "_weight", "_blur" ) ;
  }

  /**
   * blur - take a evaluation and blur it according to the intensity
   *
   * @param  {module:Models.Score} value the evaluation to blur
   * @return {Score}       the computed lower bound
   */
  blur( value ) {
    // Clamp the value to 0--5
    return Math.max( 0, value - this.blurIntensity * ( this.max - this.min ) ) ;
  }


  /**
   * set - Change the weight of this criteria in the final mix
   *
   * fire the event event:Criterion.eventType.weightUpdated followed by event event:Criterion.eventType.updated
   * @param  {number} newWeight the new weight. 0 indicate that the criteria is not considered in the final mix. There is no normalisation for now.
   * @return {number} return the new weight
   */
  set weight( newWeight ) {
    this._weight = newWeight ;
    this.fire( Criterion.eventType.weightUpdated ) ;
    this.fire( Criterion.eventType.updated ) ;
    return newWeight ;
  }

  /**
   * get - get the weight associated to this criteria.
   *
   * @return {number}  the weight. 0 means that the criteria should not be considered
   */
  get weight() {
    return this._weight || 0 ;
  }

  /**
   * set - fire the event event:Criterion.eventType.blurIntensityUpdated followed by event event:Criterion.eventType.updated
   *
   * @param  {number} intensity a 0-1 value. 0 mean no blurring should be applied ( exact values ) 1 mean all values for this technology are the same. .5 means that A dominate B if B value is smaller than A - .5 * ( range )
   * @return {number} return the intensity
   */
  set blurIntensity( intensity ) {
    this._blur = intensity ;
    this.fire( Criterion.eventType.blurIntensityUpdated ) ;
    this.fire( Criterion.eventType.updated ) ;
    return intensity ;
  }

  /**
   * get - return the intensity of the blur
   *
   * @return {number} a value between 0 and 1.
   */
  get blurIntensity() {
    return this._blur || 0 ;
  }

}

/**
 * Criterion.eventType
 * @enum {string}
 * @readonly
 * @memberof! module:Models.Criterion
 */
Criterion.eventType =
{

/** called when the criteria is changed */
updated: "updated"

/** called when the blurIntensity is changed */
, blurIntensityUpdated: "blurIntensityUpdated"

/** called when the weightUpdated is changed */
, weightUpdated: "weightUpdated"
} ;

export { Criterion } ;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ExpressUtils.html">ExpressUtils</a></li><li><a href="module-HttpUtils.html">HttpUtils</a></li><li><a href="module-Models.html">Models</a></li></ul><h3>Classes</h3><ul><li><a href="EventFirer.html">EventFirer</a></li><li><a href="module-ExpressUtils.Connector.html">Connector</a></li><li><a href="module-Models.Criterion.html">Criterion</a></li><li><a href="module-Models.Evaluation.html">Evaluation</a></li><li><a href="module-Models.Technology.html">Technology</a></li><li><a href="Sorter.html">Sorter</a></li></ul><h3>Global</h3><ul><li><a href="global.html#definePrivateProperties">definePrivateProperties</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Tue Feb 18 2020 23:32:11 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
