<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: public/javascripts/EventFirer.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: public/javascripts/EventFirer.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file event firing class
 * @author dhmmasson &lt;@dhmmasson>
 */

class EventFirer {

  /**
   * Constructor - Create an new event firer
   *
   * @param  {string[]} [eventType] list of possible events, serve no purpose for now
   */
  constructor( eventType ) {
    this.eventType = eventType ;
    this.handlers = [] ;
  }

  /**
   * fire - call the callback relative to the event
   *
   * @param  {EventFirer.eventType} eventName name of the event to fire
   */
  fire( eventName ) {
    if( Object.hasOwnProperty.call( this.handlers, eventName ) ) {
      if( typeof this.handlers[ eventName ] === "function" ) {
        this.handlers[ eventName ]( eventName, this ) ;
        return this ;
      } else if ( this.handlers[ eventName ] instanceof Array ) {
        let fired = false ;
        for( const handler of this.handlers[ eventName ] ) {

          if( typeof handler === "function" ) {
            fired = true ;
            handler( eventName, this ) ;
          }
        }
        if( fired ) return this ;
      }
    }

    return this ;
  }

  /**
   * on - add event listener
   *
   * @param  {EventFirer.eventType} eventName event to subscribe to
   * @param  {EventFirer.callback}  callback callback
   * @param  {object}  [_this] object to bind the callback
   * TODO check for duplicate
   */
  on( eventName, callback, _this ) {
    if( typeof callback !== "function" ) return ;
    if( typeof this.handlers[ eventName ] === "function" ) {
      this.handlers[ eventName ] = [ this.handlers[ eventName ], callback.bind( _this ) ] ;
    } else if ( this.handlers[ eventName ] instanceof Array ) {
      this.handlers[ eventName ].push( callback.bind( _this ) ) ;
    } else {
      this.handlers[ eventName ] = callback.bind( _this ) ;
    }
  }
}

/**
 * list of possible event that an eventFirer can fire
 * @enum {string}
 * @readonly
 */
EventFirer.eventType = {} ;

export { EventFirer } ;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ExpressUtils.html">ExpressUtils</a></li><li><a href="module-HttpUtils.html">HttpUtils</a></li><li><a href="module-Models.html">Models</a></li></ul><h3>Classes</h3><ul><li><a href="EventFirer.html">EventFirer</a></li><li><a href="module-ExpressUtils.Connector.html">Connector</a></li><li><a href="module-Models.Criterion.html">Criterion</a></li><li><a href="module-Models.Evaluation.html">Evaluation</a></li><li><a href="module-Models.Technology.html">Technology</a></li><li><a href="Sorter.html">Sorter</a></li></ul><h3>Global</h3><ul><li><a href="global.html#definePrivateProperties">definePrivateProperties</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Tue Feb 18 2020 23:51:07 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
